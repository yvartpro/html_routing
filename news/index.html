<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <base href="/">
    <meta name="description"
        content="Actualités et nouvelles du Centre Communautaire d'Iteba - Restez informé de nos activités et événements à Rumonge.">
    <title>News - CCI Rumonge | Centre Communautaire d'Iteba</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&family=Outfit:wght@400;500;600;700;800;900&display=swap"
        rel="stylesheet">
    <style>
        :root {
            --color-primary-blue: #1e40af;
            --color-primary-green: #059669;
            --color-accent-amber: #f59e0b;
        }

        body {
            font-family: 'Inter', sans-serif;
        }

        h1,
        h2,
        h3,
        h4,
        h5,
        h6 {
            font-family: 'Outfit', sans-serif;
        }
    </style>
</head>

<body class="bg-slate-50">
    <!-- Header -->
    <div id="header"></div>

    <!-- Hero Section -->
    <section
        class="relative min-h-[50vh] flex items-center overflow-hidden bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900">
        <div class="absolute inset-0 z-0 opacity-10">
            <div class="absolute inset-0"
                style="background-image: url('data:image/svg+xml,%3Csvg width=\'60\' height=\'60\' viewBox=\'0 0 60 60\' xmlns=\'http://www.w3.org/2000/svg\'%3E%3Cg fill=\'none\' fill-rule=\'evenodd\'%3E%3Cg fill=\'%23ffffff\' fill-opacity=\'0.4\'%3E%3Cpath d=\'M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z\'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E');">
            </div>
        </div>

        <div class="relative z-10 max-w-7xl mx-auto px-6 py-24 text-center">
            <h1 class="text-5xl md:text-6xl font-black text-white mb-6 leading-tight">
                Actualités & Événements
            </h1>
            <p class="text-xl md:text-2xl text-blue-100 max-w-3xl mx-auto font-medium">
                Restez informé de nos dernières activités et réalisations
            </p>
        </div>
    </section>

    <!-- News Grid -->
    <section class="py-24 bg-white">
        <div class="max-w-7xl mx-auto px-6">
            <div id="posts" class="grid gap-8 sm:grid-cols-2 lg:grid-cols-3">
                <!-- Posts will be loaded here -->
            </div>

            <!-- Load More -->
            <div class="text-center mt-16">
                <button
                    class="px-8 py-4 bg-slate-100 text-slate-900 font-bold rounded-2xl hover:bg-slate-200 transition-all uppercase tracking-widest text-sm">
                    Charger Plus d'Articles
                </button>
            </div>
        </div>
    </section>

    <!-- Newsletter -->
    <section class="py-24 bg-gradient-to-br from-blue-900 to-emerald-900">
        <div class="max-w-4xl mx-auto px-6 text-center">
            <h2 class="text-4xl font-black text-white mb-6">Restez Informé</h2>
            <p class="text-xl text-blue-100 mb-8">
                Inscrivez-vous à notre newsletter pour recevoir nos dernières actualités
            </p>
            <form class="flex flex-col sm:flex-row gap-4 max-w-2xl mx-auto">
                <input type="email" placeholder="Votre adresse email"
                    class="flex-grow px-6 py-4 rounded-2xl text-slate-900 font-medium focus:outline-none focus:ring-4 focus:ring-blue-300">
                <button type="submit"
                    class="px-8 py-4 bg-white text-blue-900 font-black rounded-2xl shadow-xl hover:shadow-2xl transition-all hover:scale-105 uppercase tracking-widest text-sm">
                    S'inscrire
                </button>
            </form>
        </div>
    </section>

    <!-- Footer -->
    <div id="footer"></div>

    <script type="module">
        // Load components
        const loadComponent = async (selector, filePath) => {
            try {
                const response = await fetch(filePath);
                if (!response.ok) throw new Error(`Failed to load ${filePath}`);
                const html = await response.text();
                const container = document.querySelector(selector);
                if (container) {
                    container.innerHTML = html;
                }
            } catch (err) {
                console.error("Error loading component:", err.message);
            }
        };

        // Load posts
        const loadPosts = async () => {
            const postsContainer = document.querySelector("#posts");
            if (!postsContainer) return;

            // Import posts data
            const { getAllPosts } = await import('./data/posts-data.js');
            const allPosts = getAllPosts();

            postsContainer.innerHTML = allPosts.map(post => `
        <article class="bg-white rounded-3xl overflow-hidden shadow-sm hover:shadow-2xl transition-all duration-500 transform hover:-translate-y-3 border border-slate-100 flex flex-col h-full group">
          <div class="relative h-64 overflow-hidden">
            <img src="${post.image}" alt="${post.title}" class="w-full h-full object-cover transition-transform duration-700 group-hover:scale-110">
            <div class="absolute top-4 left-4">
              <span class="px-4 py-1.5 rounded-full text-[10px] font-black uppercase tracking-widest bg-white/90 backdrop-blur text-blue-700 shadow-sm">${post.category}</span>
            </div>
          </div>
          <div class="p-8 flex-grow">
            <div class="text-xs font-bold text-slate-400 mb-4 uppercase tracking-widest">${post.date}</div>
            <h3 class="text-2xl font-bold text-slate-900 group-hover:text-blue-700 transition-colors leading-tight mb-4">${post.title}</h3>
            <p class="text-slate-500 text-sm leading-relaxed">${post.excerpt}</p>
          </div>
          <div class="px-8 pb-8 pt-4">
            <a href="post-detail?id=${post.id}" class="inline-flex items-center text-xs font-black uppercase tracking-widest text-blue-600 hover:text-emerald-600 transition-colors group/link">
              Lire la suite
              <svg class="w-4 h-4 ml-2 transition-transform group-hover/link:translate-x-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"/></svg>
            </a>
          </div>
        </article>
      `).join('');
        };

        // Mobile menu logic
        const initMobileMenu = () => {
            const menuBtn = document.querySelector("#mobile-menu-btn");
            const closeBtn = document.querySelector("#mobile-menu-close");
            const mobileMenu = document.querySelector("#mobile-menu");
            const overlay = document.querySelector("#mobile-menu-overlay");

            if (!menuBtn || !mobileMenu || !overlay || !closeBtn) return;

            const openMenu = () => {
                overlay.classList.remove("hidden");
                mobileMenu.classList.remove("hidden");

                setTimeout(() => {
                    overlay.classList.remove("opacity-0");
                    overlay.classList.add("opacity-100");
                    mobileMenu.classList.remove("translate-x-full");
                    mobileMenu.classList.add("translate-x-0");
                }, 10);

                document.documentElement.style.overflow = "hidden";
                document.body.style.overflow = "hidden";
                document.body.style.position = "fixed";
                document.body.style.width = "100%";
            };

            const closeMenu = () => {
                overlay.classList.remove("opacity-100");
                overlay.classList.add("opacity-0");
                mobileMenu.classList.remove("translate-x-0");
                mobileMenu.classList.add("translate-x-full");

                setTimeout(() => {
                    overlay.classList.add("hidden");
                    mobileMenu.classList.add("hidden");
                }, 500);

                document.documentElement.style.overflow = "";
                document.body.style.overflow = "";
                document.body.style.position = "";
                document.body.style.width = "";
            };

            menuBtn.addEventListener("click", openMenu);
            closeBtn.addEventListener("click", closeMenu);

            overlay.addEventListener("click", (e) => {
                e.preventDefault();
                e.stopPropagation();
                closeMenu();
            });

            overlay.addEventListener("touchmove", (e) => {
                e.preventDefault();
            }, { passive: false });

            overlay.addEventListener("wheel", (e) => {
                e.preventDefault();
            }, { passive: false });

            mobileMenu.querySelectorAll("a").forEach(link => {
                link.addEventListener("click", closeMenu);
            });
        };

        // Initialize
        const init = async () => {
            await Promise.all([
                loadComponent("#header", "./component/header.html"),
                loadComponent("#footer", "./component/footer.html")
            ]);

            await loadPosts();
            initMobileMenu();
        };

        init();
    </script>
</body>

</html>